(this.webpackJsonpreactone=this.webpackJsonpreactone||[]).push([[0],{11:function(e,t,n){e.exports=n(17)},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(6),c=n.n(o),u=(n(16),n(7)),s=n(8),i=n(3),l=n(9),h=n(10),m=n(1),d=(n(5),n(2)),p=function(e){return a.a.createElement("div",{className:"chordcard".concat(e.dead?" dead":"")},a.a.createElement("h3",{className:"chordname"},e.chordName),e.array.concat().reverse().map((function(e){return a.a.createElement("div",{className:"notes"},e)})))},f=(new d.PolySynth).toMaster(),v=function(e){return d.Frequency("C3").transpose(e).toNote()},y=function(e,t){return d.Frequency(t).transpose(e).toNote()},N="C3";d.Transport.bpm.value=144;var b=[0,2,4,5,7,9,11],E=b.map((function(e){return y(e,"C3")})),g=(N=b.map((function(e){return y(e,N)})),{octave:[-12,0,12],_:[0,4,7],_7:[0,4,7,11],_M7:[0,4,7,10],_add9:[0,4,7,14],m:[0,3,7],m7:[0,3,7,11],mM7:[0,3,7,10]}),k=function(e,t){var n=g.octave.map((function(e){return e+t-12})),r=n.map((function(t){return Math.abs(t-e)}));return n[r.indexOf(Math.min.apply(null,r))]},O=function(e,t){var n=[],r=t;n.push(r);for(var a=1;a<t.length;a++){var o=[].concat(Object(m.a)(r.slice(0,a).map((function(e){return e+12}))),Object(m.a)(r.slice(a)));n.push(o)}var c=n.map((function(e){return e.map((function(e){return e+12}))})),u=n.map((function(e){return e.map((function(e){return e-12}))}));return n.push.apply(n,Object(m.a)(c)),n.push.apply(n,Object(m.a)(u)),n},S=function(e){for(var t=Math.min.apply(Math,Object(m.a)(e)),n=Math.max.apply(Math,Object(m.a)(e)),r=[],a=t;a<=n;++a)r.push(a);return r},j=function(e,t){return e.filter((function(e){return t.includes(e)})).length},M=function(e){var t=E.map((function(e){return e.slice(0,-1)}));return 0===e.map((function(e){return e.slice(0,-1)})).filter((function(e){return!t.includes(e)})).length},w=function(e){Object(h.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).state={isPlay:!1,score:[],played:[]},r.pushToScore=r.pushToScore.bind(Object(i.a)(r)),r.handleLoop=r.handleLoop.bind(Object(i.a)(r)),r.loop(),r}return Object(s.a)(n,[{key:"handleLoop",value:function(){(new d.PolySynth).toMaster();this.setState({isPlay:!this.state.isPlay})}},{key:"pushToScore",value:function(e,t,n){this.setState({score:[].concat(Object(m.a)(this.state.score),[{sound:e,noteNum:t,chordName:n}])})}},{key:"soundFromStack",value:function(){if(0!==this.state.score.length){var e=this.state.score,t=e.shift();r=t.sound,f.triggerAttackRelease(r,"2n");var n=this.state.played;n.push(t),this.setState({score:e,played:n})}var r}},{key:"loop",value:function(){var e=this;setInterval((function(){e.state.isPlay&&(console.log("beats!"),e.soundFromStack())}),2/144*60*1e3)}},{key:"render",value:function(){var e,t,n=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,"\u30b3\u30fc\u30c9"),a.a.createElement("h2",null,"\u518d\u751f\u30fb\u505c\u6b62"),a.a.createElement("button",{onClick:function(){return n.handleLoop()}},this.state.isPlay?"stop":"start"),a.a.createElement("h2",null,"score"),a.a.createElement("div",{className:"yoko scoreboard"},(e=this.state.score,t=this.state.played,a.a.createElement(a.a.Fragment,null,t.map((function(e){return a.a.createElement(p,{dead:!0,chordName:e.chordName,array:e.sound})})),e.map((function(e){return a.a.createElement(p,{chordName:e.chordName,array:e.sound})}))))),a.a.createElement("h2",null,"note"),E.map((function(e){return a.a.createElement("button",{onClick:function(){return t=e,f.triggerAttackRelease(t,"4n");var t}},e)})),a.a.createElement("h2",null,"\u52dd\u624b\u306b\u8fd1\u3044\u8ee2\u56de\u5f62\u3092\u3048\u3089\u3073\u307e\u3059"),b.map((function(e){var t=function(e){for(var t=[],n=0,r=Object.keys(g);n<r.length;n++){var a=r[n];t.push({chordRootNum:e,chordSeed:g[a].map((function(t){return t+e})),chordName:v(e).slice(0,1)+a})}return t}(e);return a.a.createElement("div",null,t.map((function(e){var t=function(e){var t=e.beforeChordArr,n=void 0===t?[]:t,r=e.chordRootNum,a=e.chordSeed,o=e.chordName;e.onChord;if(0===n.length){var c=[r-12].concat(Object(m.a)(a));return{chordName:o,notesNum:c,notes:c.map((function(e){return v(e)}))}}n.sort((function(e,t){return e-t}));var u=n.slice(0,1),s=k(u,r),i=O(r,a),l=S(n.slice(1)),h=i.map((function(e){return j(l,S(e))})),d=i[h.indexOf(Math.max.apply(null,h))],p=[s].concat(Object(m.a)(d)).sort((function(e,t){return e-t}));return{chordName:o,notesNum:p,notes:p.map((function(e){return v(e)}))}}({beforeChordArr:0===n.state.score.length?[]:n.state.score.slice(-1)[0].noteNum,chordRootNum:e.chordRootNum,chordSeed:e.chordSeed,chordName:e.chordName});return a.a.createElement("button",{className:M(e.chordSeed.map((function(e){return v(e)})))?"diatonic":"",onClick:function(){return n.pushToScore(t.notes,t.notesNum,t.chordName)}},t.chordName)})))})))}}]),n}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,t,n){}},[[11,1,2]]]);
//# sourceMappingURL=main.2825f3c4.chunk.js.map